version: '3.2'
services:
    hl7source:
        build:
            context: ..
            dockerfile: Emap-Core/Dockerfile
            args:
                HTTP_PROXY: ${HTTP_PROXY}
                http_proxy: ${http_proxy}
                HTTPS_PROXY: ${HTTPS_PROXY}
                https_proxy: ${https_proxy}
        env_file:
            - ../config/emap-core-config-envs
        logging:
            driver: "json-file"
        restart: on-failure
    rabbitmq:
        image: rabbitmq:management
        env_file:
            - ../config/rabbitmq-config-envs
        ports:
            - "${RABBITMQ_PORT}:5672"
            - "${RABBITMQ_ADMIN_PORT}:15672"
        restart: on-failure
