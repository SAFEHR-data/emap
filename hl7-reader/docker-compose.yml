version: '3.2'
services:
    emapstar:
        network_mode: host
        container_name: emapstar
        environment:
            NODE_ENV: test
        build:
            context: ..
            dockerfile: Emap-Core/Dockerfile.emapstar
            args:
                HTTP_PROXY: ${HTTP_PROXY}
                http_proxy: ${http_proxy}
                HTTPS_PROXY: ${HTTPS_PROXY}
                https_proxy: ${https_proxy}
        env_file:
            - hl7-envs
        logging:
            driver: "json-file"
    hl7source:
        network_mode: host
        container_name: hl7source
        environment:
            NODE_ENV: test
        build:
            context: ..
            dockerfile: Emap-Core/Dockerfile.hl7source
            args:
                HTTP_PROXY: ${HTTP_PROXY}
                http_proxy: ${http_proxy}
                HTTPS_PROXY: ${HTTPS_PROXY}
                https_proxy: ${https_proxy}
        env_file:
            - hl7-envs
        logging:
            driver: "json-file"
    rabbitmq:
        image: rabbitmq:management
        ports:
            - "5672:5672"
            - "15672:15672"
